var app={init:function(){this.pageConfig(),this.initFeedbacksSlider(),this.togglePopUpWin(),this.showScrollButton(),this.scrollTop(),this.timerCountdown()},pageConfig:function(){$.getJSON("/pageConfig.json",function(e){var t=e.pageConfig.currency,i=e.pageConfig.price+t,a=e.pageConfig.specialPrice+t,n=e.quantity.blue,o=e.quantity.black;$(".price").each(function(){$(this).find("s").html(i),$(this).find("b").html(a)}),$(".qty").find(".blue").html(n),$(".qty").find(".black").html(o)})},initFeedbacksSlider:function(){feedbacksSlider=jQuery(".feedbacksSlider"),feedbacksSlider.length&&feedbacksSlider.owlCarousel({singleItem:!0,itemsCustom:!1,slideSpeed:500,transitionStyle:"backSlide",mouseDrag:!1,autoHeight:!0,lazyLoad:!0})},togglePopUpWin:function(){var e=$(".popUpWin"),t=$(".winTrigger");t.click(function(){e.toggleClass("active")}),$(document).keydown(function(t){27==t.keyCode&&e.removeClass("active")})},validateForm:function(e){var t=e.find($('input[name="name"]')),i=e.find($('input[name="phone"]')),a=t.val().match(/[А-я]{2,}/),n=i.val().match(/^80\d{9}$/),o=t.next("label").hasClass("active"),s=i.next("label").hasClass("active");if(a)if(n)a&&n&&(app.formRequest(e),t.val(""),i.val(""));else{if(s)return!1;app.showMessageBlock(i,"#phoneValidationFailed")}else{if(o)return!1;app.showMessageBlock(t,"#nameValidationFailed")}},formRequest:function(e){var t="/forms.php";e.addClass("loading"),$.ajax({type:"POST",url:t,data:e.serialize(),success:function(){e.removeClass("loading"),app.showMessageBlock(e,"#successMessage")},error:function(){e.removeClass("loading"),app.showMessageBlock(e,"#errorMessage")}})},showMessageBlock:function(e,t){e.after($(t)),$(t).addClass("active")},hideMessageBlock:function(e){$(e).removeClass("active")},scrollTop:function(){$(".scrollTop").click(function(){$("html, body").animate({scrollTop:0},600)})},showScrollButton:function(){$(window).scroll(function(){var e=window.innerHeight,t=window.pageYOffset,i=$(".scrollTop");t>e?i.addClass("active"):i.removeClass("active")})},timerCountdown:function(){var e=new Date,t=new Date,i=(0-e.getDay(),0-e.getHours(),0-e.getMinutes()),a=60-e.getSeconds();t=new Date(t.setDate(t.getDate()+3)),t=new Date(t.setHours(t.getHours()+12)),t.setMinutes(i),t.setSeconds(a),$("#timer").countdown({timestamp:t})}};jQuery(function(e){app.init(),e('input[type="submit"]').click(function(t){var i=e(this).closest("form");app.validateForm(i),t.preventDefault()})});