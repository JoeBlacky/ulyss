var app={init:function(){this.pageConfig(),this.initFeedbacksSlider(),this.togglePopUpWin(),this.showScrollButton(),this.scrollTop(),this.timerCountdown(),this.checkCopyDate()},pageConfig:function(){$.getJSON("/pageConfig.json",function(e){var t=e.price.currency,a=e.price.price+t,i=e.price.specialPrice+t,n=e.quantity.blue,o=e.quantity.black,s=e.brand.name,l=e.brand.slogan;$(".price").each(function(){$(this).find("s").html(a),$(this).find("b").html(i)}),$(".qty").find(".blue").html(n),$(".qty").find(".black").html(o),$(".slogan").html(l),$(".brandName").html(s)})},initFeedbacksSlider:function(){feedbacksSlider=jQuery(".feedbacksSlider"),feedbacksSlider.length&&feedbacksSlider.owlCarousel({singleItem:!0,itemsCustom:!1,slideSpeed:500,transitionStyle:"backSlide",mouseDrag:!1,autoHeight:!0,lazyLoad:!0})},togglePopUpWin:function(){var e=$(".popUpWin"),t=$(".winTrigger");t.click(function(){e.toggleClass("active")}),$(document).keydown(function(t){27==t.keyCode&&e.removeClass("active")})},validateForm:function(e){var t=e.find($('input[name="name"]')),a=e.find($('input[name="phone"]')),i=t.val().match(/[А-я]{2,}/),n=a.val().match(/^80\d{9}$/),o=t.next("label").hasClass("active"),s=a.next("label").hasClass("active");if(i)if(n)i&&n&&(app.formRequest(e),t.val(""),a.val(""));else{if(s)return!1;app.showMessageBlock(a,"#phoneValidationFailed")}else{if(o)return!1;app.showMessageBlock(t,"#nameValidationFailed")}},formRequest:function(e){var t="/forms.php";e.addClass("loading"),$.ajax({type:"POST",url:t,data:e.serialize(),success:function(){e.removeClass("loading"),app.showMessageBlock(e,"#successMessage")},error:function(){e.removeClass("loading"),app.showMessageBlock(e,"#errorMessage")}})},showMessageBlock:function(e,t){e.after($(t)),$(t).addClass("active")},hideMessageBlock:function(e){$(e).removeClass("active")},scrollTop:function(){$(".scrollTop").click(function(){$("html, body").animate({scrollTop:0},600)})},showScrollButton:function(){var e=window.innerHeight,t=window.pageYOffset,a=$(".scrollTop");t>e?a.addClass("active"):a.removeClass("active")},timerCountdown:function(){var e=new Date,t=new Date,a=(0-e.getDay(),0-e.getHours(),0-e.getMinutes()),i=60-e.getSeconds();t=new Date(t.setDate(t.getDate()+3)),t=new Date(t.setHours(t.getHours()+12)),t.setMinutes(a),t.setSeconds(i),$("#timer").countdown({timestamp:t})},checkCopyDate:function(){var e=2015,t=(new Date).getFullYear();t>e&&$(".copy").find("h6").html("&copy; "+e+" - "+t)}};jQuery(function(e){app.init(),e('input[type="submit"]').click(function(t){var a=e(this).closest("form");app.validateForm(a),t.preventDefault()}),e(window).scroll(function(){app.showScrollButton()})});